get:
  operationId: getFormAndContents
  summary: 指定したフォームとその内容を取得する
  parameters:
    - $ref: './types/form.yml#/components/parameters/form_id_path'
  responses:
    '200':
      description: フォームの取得に成功
      content:
        application/json:
          schema:
            $ref: './types/form.yml#/components/schemas/form'
          examples:
            with_description:
              summary: フォームの説明文を含んだフォーム
              value:
                id: 0
                info:
                  title: お問い合わせフォーム
                  description: このフォームはお問い合わせをする際にご回答いただくフォームです。
                items:
                  - id: 0
                    title: アイテムのタイトル
                    description: アイテムの説明文です。
                    text_item: {}
                  - id: 1
                    title: 質問1
                    description: 質問1の説明文です。
                    question_item:
                      question:
                        id: 0
                        text_question:
                          is_paragraph: false
                  - id: 2
                    title: 質問2
                    description: 質問2の説明文です。
                    question_item:
                      question:
                        id: 1
                        text_question:
                          is_paragraph: true
                  - id: 3
                    title: 質問3
                    description: 質問3の説明文です。
                    question_item:
                      question:
                        id: 2
                        choice_question:
                          question_type: RADIO
                          choices:
                            - 選択肢1
                            - 選択肢2
                version_number: 0
            with_period:
              summary: 回答可能期間が過ぎているフォーム
              value:
                id: 0
                info:
                  title: お問い合わせフォーム
                items:
                  - id: 0
                    title: アイテムのタイトル
                    description: アイテムの説明文です。
                    text_item: {}
                settings:
                  response_period:
                    start_at: '2022-01-01T00:00:00Z'
                    end_at: '2022-01-31T23:59:59Z'
                version_number: 0
    '400':
      description: リクエストの構文が間違っている
    '401':
      description: 認証がされていない
    '403':
      description: 権限が不足している
    '404':
      description: フォームが存在しない
    '500':
      description: サーバーエラー
post:
  operationId: updateForm
  summary: 指定したフォームを更新する
  parameters:
    - $ref: './types/form.yml#/components/parameters/form_id_path'
  requestBody:
    description: 更新するフォームの内容
    required: true
    content:
      application/json:
        schema:
          description: 更新内容
          type: object
          properties:
            requests:
              description: 更新リクエスト群
              type: array
              uniqueItems: true
              minItems: 1
              items:
                $ref: './types/request.yml#/components/schemas/request'
            target_version_number:
              $ref: './types/form.yml#/components/schemas/version_number'
          required:
            - requests
            - target_version_number
        examples:
          single_request:
            summary: 1つだけの更新リクエスト
            value:
              requests:
                - move_item:
                    original_location:
                      index: 0
                    new_location:
                      index: 1
              target_version_number: 0
          multiple_requests:
            summary: 複数の更新リクエスト
            value:
              requests:
                - move_item:
                    original_location:
                      index: 0
                    new_location:
                      index: 1
                - delete_item:
                    location:
                      index: 0
              target_version_number: 0
  responses:
    '200':
      description: フォームの更新に成功
      content:
        application/json:
          schema:
            type: object
            properties:
              replies:
                type: array
                uniqueItems: true
                minItems: 0
                items:
                  type: object
                  properties:
                    item_id:
                      description: 作成されたアイテムのID
                      allOf:
                        - $ref: './types/item.yml#/components/schemas/item_id'
                    question_id:
                      description: アイテムの作成に伴って作成された質問のID群
                      type: array
                      uniqueItems: true
                      minItems: 1
                      items:
                        $ref: './types/question.yml#/components/schemas/question_id'
                  required:
                    - item_id
              version_number:
                $ref: './types/form.yml#/components/schemas/version_number'
            required:
              - replies
              - version_number
          examples:
            no_created:
              summary: 何も作成されたものがない
              value:
                replies: []
                version_number: 0
            item_created:
              summary: アイテムが作成された（質問は作成されなかった）
              value:
                replies:
                  - item_id: 0
                version_number: 0
            all_created:
              summary: アイテムも質問もどちらも作成された
              value:
                replies:
                  - item_id: 0
                    question_id:
                      - 0
                      - 1
                version_number: 0
    '400':
      description: リクエストの構文が間違っている
    '401':
      description: 認証がされていない
    '403':
      description: 権限が不足している
    '404':
      description: フォームが存在しない
    '500':
      description: サーバーエラー
delete:
  operationId: removeForm
  summary: 指定されたフォームを削除する
  parameters:
    - $ref: './types/form.yml#/components/parameters/form_id_path'
  responses:
    '200':
      description: フォームの削除に成功
    '400':
      description: リクエストの構文が間違っている
    '401':
      description: 認証がされていない
    '403':
      description: 権限が不足している
    '404':
      description: フォームが存在しない
    '500':
      description: サーバーエラー
