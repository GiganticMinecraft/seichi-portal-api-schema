get:
  operationId: getFormAndContents
  summary: 指定したフォームとその内容を取得する
  parameters:
    - $ref: './types/form.yml#/components/parameters/form_id_path'
  responses:
    '200':
      description: フォームの取得に成功
      content:
        application/json:
          schema:
            $ref: './types/form.yml#/components/schemas/form'
    '400':
      description: リクエストの構文が間違っている
    '401':
      description: 認証がされていない
    '403':
      description: 権限が不足している
    '404':
      description: フォームが存在しない
    '500':
      description: サーバーエラー
post:
  operationId: updateForm
  summary: 指定したフォームを更新する
  parameters:
    - $ref: './types/form.yml#/components/parameters/form_id_path'
  requestBody:
    description: 更新するフォームの内容
    required: true
    content:
      application/json:
        schema:
          type: array
          uniqueItems: true
          minItems: 1
          items:
            $ref: './types/request.yml#/components/schemas/request'
        examples:
          single_request:
            summary: 1つだけの更新リクエスト
            value:
              - move_item:
                  original_location:
                    index: 0
                  new_location:
                    index: 1
          multiple_requests:
            summary: 複数の更新リクエスト
            value:
              - move_item:
                  original_location:
                    index: 0
                  new_location:
                    index: 1
              - delete_item:
                  location:
                    index: 0
  responses:
    '200':
      description: フォームの更新に成功
      content:
        application/json:
          schema:
            type: object
            properties:
              replies:
                type: array
                uniqueItems: true
                minItems: 0
                items:
                  type: object
                  properties:
                    item_id:
                      description: 作成されたアイテムのID
                      allOf:
                        - $ref: './types/item.yml#/components/schemas/item_id'
                    question_id:
                      description: アイテムの作成に伴って作成された質問のID群
                      type: array
                      uniqueItems: true
                      minItems: 1
                      items:
                        $ref: './types/question.yml#/components/schemas/question_id'
                  required:
                    - item_id
            required:
              - replies
          examples:
            no_created:
              summary: 何も作成されたものがない
              value:
                replies: []
            item_created:
              summary: アイテムが作成された（質問は作成されなかった）
              value:
                replies:
                  - item_id: 0
            all_created:
              summary: アイテムも質問もどちらも作成された
              value:
                replies:
                  - item_id: 0
                    question_id:
                      - 0
                      - 1
    '400':
      description: リクエストの構文が間違っている
    '401':
      description: 認証がされていない
    '403':
      description: 権限が不足している
    '404':
      description: フォームが存在しない
    '500':
      description: サーバーエラー
delete:
  operationId: removeForm
  summary: 指定されたフォームを削除する
  parameters:
    - $ref: './types/form.yml#/components/parameters/form_id_path'
  responses:
    '200':
      description: フォームの削除に成功
    '400':
      description: リクエストの構文が間違っている
    '401':
      description: 認証がされていない
    '403':
      description: 権限が不足している
    '404':
      description: フォームが存在しない
    '500':
      description: サーバーエラー
